{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nlet totalImages = 0;\nconst loader = document.querySelector('.loader-span')\nconst loadBtn = document.querySelector('.load-button')\nconst LoadMore = document.querySelector('.load-more')\n\n// початкові стилі\nloader.style.display = 'none';\nloadBtn.style.display = 'none';\nLoadMore.style.display = 'none'\n\n// для формування запиту на сервер дані\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst KEY = '42597996-b1dc9edd2aa87e1c7d2b2d72b';\n\n// робимо запит\nexport async function makeRequest(QUERY, page, per_page) {\n    loader.style.display = 'block';\n    const params = {\n        key: KEY,\n        q: `${QUERY}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: per_page,\n        page: page\n    };\n    try {\n        const response = await axios.get('/', {\n            params: params\n        });\n        // зберігаємо загальну кількість зображень\n        totalImages = response.data.totalHits;\n        return response.data;\n    }\n    catch (error) {\n        console.log(`Error! ${error}`);\n        throw new Error;\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom'\n});\n\nlet imagesCollection = document.querySelector('.images');\nconst LoadMore = document.querySelector('.load-more');\nLoadMore.style.display = 'none'\n\nexport function updateGallery(images) {\n    const galleryHTML = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<div class=\"items\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\">\n            </a>\n            <div class=\"info-gallery\">\n                <p class=\"gallery-description\">\n                    <span class=\"gallery-description-span\">Likes:\n                    <span class=\"span\">${likes}</span>\n                    </span>\n                </p>\n                <p class=\"gallery-description\">\n                    <span class=\"gallery-description-span\">Views: <span class=\"span\">${views}</span>\n                    </span>   \n                </p>\n                <p class=\"gallery-description\">\n                    <span class=\"gallery-description-span\">Comments: <span class=\"span\">${comments}</span>\n                    </span>   \n                </p>\n                <p class=\"gallery-description\">\n                    <span class=\"gallery-description-span\">Downloads: <span class=\"span\">${downloads}</span>\n                    </span>   \n                </p>\n            </div>\n        </div>`;\n    }).join('');\n        imagesCollection.innerHTML += galleryHTML;\n        LoadMore.style.display = 'none';\n        smoothScrollToGallery()\n}\n\nexport function smoothScrollToGallery() {\n    const cards = document.querySelectorAll('.items');\n    \n    if (cards.length > 0) {\n        const cardHeight = cards[0].getBoundingClientRect().height;\n        window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n}\n","import { makeRequest } from \"./js/pixabay-api\";\nimport { updateGallery } from \"./js/render-functions\";\nimport { smoothScrollToGallery } from \"./js/render-functions\";\n\n// витягуємо елементи і задаємо початкові стилі\nconst searchBtn = document.querySelector('button');\nconst searchInput = document.querySelector('input');\nconst searchForm = document.querySelector('form');\nlet imagesCollection = document.querySelector('.images');\nconst loader = document.querySelector('.loader-span')\nconst loadBtn = document.querySelector('.load-button')\nconst LoadMore = document.querySelector('.load-more')\n\n// початкові стилі\nloader.style.display = 'none';\nloadBtn.style.display = 'none';\nLoadMore.style.display = 'none'\n\n// імпортуємо бібліотеки\nimport axios from \"axios\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom'\n});\n\n// оголошуємо пусті змінні для подальшої роботи\n\n// пошуковий запит користувача\nlet QUERY = '';\n// початкова сторінка і кількість елементів у віповіді\nlet page;\nlet per_page;\n// кількість хітсів\nlet totalImages = 0;\n// висота лі\nlet cardHeight;\n\n//вішаємо слухача на подію сабміт\n\nsearchForm.addEventListener('submit', getLink);\n\nfunction getLink(event) {\n    imagesCollection.innerHTML = '';\n     event.preventDefault();\n     //отримуємо значення для пошуку від користувача\n    QUERY = searchInput.value.trim();\n\n    page = 1;\n    // перевіряємо, чи користувач щось ввів\n    if (QUERY !== \"\")  {\n        //даємо згенероване посилання на сервер\n        makeRequest(QUERY, page, per_page)\n        //викликаємо функцію формування карток\n        createCard()\n    }\n    else {\n        \n        iziToast.error({\n                timeout: 3000,\n                position: 'topRight',\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n    });   \n       loadBtn.style.display = 'none';\n    }\n    searchForm.reset();\n}\n\n// генеруємо галерею, показуємо кнопку лоад мор \nfunction createCard() {\n    makeRequest(QUERY, page, 15).then(data => {\n        updateGallery(data.hits);\n        loader.style.display = 'none';\n        loadBtn.style.display = 'block';\n        lightbox.refresh() \n        }).catch(error => {\n            console.error('Error fetching images:', error);\n    });\n}\n\n// вішаємо слухача події на кнопку лоад мор\nloadBtn.addEventListener('click', showMore)\n\nfunction showMore()  {\n    loadBtn.style.display = 'none';\n    LoadMore.style.display = 'block';\n    page++;\n    makeRequest(QUERY, page, 15)\n        .then(data => {\n            totalImages = data.totalHits;\n            updateGallery(data.hits);\n            loader.style.display = 'none';\n            // перевіряємо, чи було завантажено максимальну кількість зображень\n            if (imagesCollection.children.length >= totalImages) {\n                LoadMore.style.display = 'none';\n                iziToast.info({\n                    timeout: 3000,\n                    position: 'topRight',\n                    message: \"You've reached the end of search results.\"\n                });\n            } else {\n                loadBtn.style.display = 'block';\n            }\n            lightbox.refresh();\n        })\n        .catch(error => {\n            console.error('Error fetching images:', error);\n                iziToast.info({\n                    timeout: 3000,\n                    position: 'topRight',\n                    message: \"We're sorry, but you've reached the end of search results.\"\n                });\n        });\n}\n"],"names":["totalImages","loader","loadBtn","LoadMore","axios","KEY","makeRequest","QUERY","page","per_page","params","response","error","SimpleLightbox","imagesCollection","updateGallery","images","galleryHTML","webformatURL","largeImageURL","tags","likes","views","comments","downloads","smoothScrollToGallery","cards","cardHeight","searchInput","searchForm","lightbox","getLink","event","createCard","iziToast","data","showMore"],"mappings":"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"}